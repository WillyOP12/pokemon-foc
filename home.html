<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <title>La Meva Col·lecció i Intercanvis</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .card {
      border: 2px solid #e74c3c;
      border-radius: 12px;
      padding: 10px;
      margin: 10px;
      text-align: center;
      width: 150px;
      background-color: #fff6f0;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .card img {
      width: 100px;
      height: auto;
      border-radius: 10px;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .notifications {
      margin-top: 30px;
    }
    .notification {
      background-color: #f39c12;
      padding: 10px;
      border-radius: 5px;
      margin: 5px 0;
    }
    .interchange {
      margin-top: 30px;
    }
    .card-select {
      margin: 10px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <h1>Col·lecció Pokémon Foc 🔥</h1>

  <!-- Secció de col·lecció -->
  <div class="container" id="coleccio"></div>

  <div class="interchange">
    <h3>Sol·licita un intercanvi</h3>
    <label for="cartaIntercanvi">Escull una carta per intercanviar:</label>
    <select id="cartaIntercanvi" class="card-select">
      <option value="">Cap carta</option>
    </select>

    <label for="cartaSol·licitada">Escull la carta que vols obtenir:</label>
    <select id="cartaSol·licitada" class="card-select">
      <option value="">Cap carta</option>
    </select>
    
    <button onclick="sol·licitarIntercanvi()">Sol·licitar intercanvi</button>
  </div>

  <!-- Secció de notificacions -->
  <div class="notifications" id="notificacions">
    <h3>Les teves notificacions:</h3>
    <div id="notificacionsList"></div>
  </div>

  <script>
    const cartes = JSON.parse(localStorage.getItem("cartes")) || [];
    let notificacions = JSON.parse(localStorage.getItem("notificacions")) || [];
    
    const contenedor = document.getElementById("coleccio");
    const selectIntercanvi = document.getElementById("cartaIntercanvi");
    const selectSolicitada = document.getElementById("cartaSol·licitada");
    const notificacionsDiv = document.getElementById("notificacionsList");

    if (cartes.length === 0) {
      contenedor.innerHTML = "<p>No tens cap carta encara!</p>";
    } else {
      cartes.forEach(carta => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
          <img src="${carta.image}" alt="${carta.name}">
          <h3>${carta.name}</h3>
          <p>Probabilitat: ${carta.rarity}</p>
        `;
        contenedor.appendChild(div);

        // Afegir les cartes als selects per intercanviar
        const option = document.createElement("option");
        option.value = carta.name;
        option.textContent = carta.name;
        selectIntercanvi.appendChild(option);
        selectSolicitada.appendChild(option.cloneNode(true));
      });
    }

    // Funció per sol·licitar un intercanvi
    function sol·licitarIntercanvi() {
      const cartaIntercanvi = selectIntercanvi.value;
      const cartaSol·licitada = selectSolicitada.value;

      if (!cartaIntercanvi || !cartaSol·licitada) {
        alert("Has d'escollir una carta per intercanviar i una carta per sol·licitar.");
        return;
      }

      const cartaSolicitada = cartes.find(carta => carta.name === cartaSol·licitada);
      if (!cartaSolicitada) {
        alert("Aquesta carta no està disponible.");
        return;
      }

      // Afegir notificació a les persones que tenen la carta sol·licitada
      let notificacio = `Vols intercanviar la carta "${cartaIntercanvi}" per la carta "${cartaSol·licitada}".`;
      
      notificacions.push(notificacio);
      localStorage.setItem("notificacions", JSON.stringify(notificacions));
      
      // Actualitzar les notificacions a la pàgina
      mostrarNotificacions();
    }

    // Mostrar notificacions
    function mostrarNotificacions() {
      notificacionsDiv.innerHTML = "";
      notificacions.forEach(noti => {
        const div = document.createElement("div");
        div.className = "notification";
        div.textContent = noti;
        notificacionsDiv.appendChild(div);
      });
    }

    // Carregar notificacions al començar
    mostrarNotificacions();
  </script>
</body>
</html>
